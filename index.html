<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>История моей семьи - Создайте свое генеалогическое древо</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Шапка для лендинга -->
    <header id="landing-header">
        <div class="header-container container">
            <a href="index.html" class="logo">
                <i class="fas fa-tree"></i>
                История моей семьи
            </a>
            
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html#features">Возможности</a></li>
                    <li><a href="index.html#about">О проекте</a></li>
                    <li><a href="auth.html">Войти</a></li>
                </ul>
                <button class="mobile-menu-btn" id="landing-mobile-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
            
            <a href="auth.html?mode=register" class="btn" id="landing-register-btn">
                Начать бесплатно
            </a>
        </div>
    </header>

    <!-- Лендинг страница -->
    <section id="landing-page">
        <div class="landing-hero">
            <div class="container">
                <h1>Сохраните историю вашей семьи для будущих поколений</h1>
                <p>Создайте цифровое генеалогическое древо, храните фотографии, делитесь историями и сохраняйте семейные традиции в одном безопасном месте.</p>
                <div class="hero-buttons">
                    <a href="auth.html?mode=register" class="btn" id="start-free-btn">
                        <i class="fas fa-play-circle"></i> Начать бесплатно
                    </a>
                    <button class="btn btn-outline" id="try-tree-btn">
                        <i class="fas fa-sitemap"></i> Попробовать построить дерево
                    </button>
                </div>
            </div>
        </div>
        
        <div id="features" class="landing-features">
            <div class="container">
                <h2 style="text-align: center; margin-bottom: 50px;">Возможности платформы</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-sitemap"></i>
                        </div>
                        <h3>Интерактивное древо</h3>
                        <p>Создавайте, редактируете и визуализируете ваше генеалогическое древо с фотографиями и биографиями.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <h3>Семейный архив</h3>
                        <p>Храните фотографии, документы и видео в одном защищенном месте с возможностью подписей и датирования.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>Лента событий</h3>
                        <p>Отмечайте важные даты, дни рождения и семейные праздники с напоминаниями и историями.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <h3>Совместный доступ</h3>
                        <p>Приглашайте родственников для совместного наполнения древа и общения в семейном чате.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-print"></i>
                        </div>
                        <h3>Печать и экспорт</h3>
                        <p>Распечатывайте красивые версии вашего древа или сохраняйте в различных форматах для архива.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <h3>Умные уведомления</h3>
                        <p>Получайте напоминания о предстоящих событиях и днях рождения родственников.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Секция "О проекте" -->
        <div id="about" class="about-section">
            <div class="container">
                <div class="about-content">
                    <h2>О проекте "История моей семьи"</h2>
                    <p>Наш проект создан для того, чтобы помочь семьям сохранить свою историю, традиции и воспоминания для будущих поколений.</p>
                    <p>Мы верим, что каждая семья уникальна, и ее история заслуживает того, чтобы быть сохраненной в цифровом формате.</p>
                    <p>С помощью нашей платформы вы можете:</p>
                    <ul style="text-align: left; margin: 20px 0; color: #4a5568;">
                        <li>Создать интерактивное генеалогическое древо</li>
                        <li>Хранить семейные фотографии и документы</li>
                        <li>Отмечать важные даты и события</li>
                        <li>Приглашать родственников для совместной работы</li>
                        <li>Сохранять истории и воспоминания</li>
                    </ul>
                    <p>Присоединяйтесь к тысячам семей, которые уже сохраняют свою историю с нами!</p>
                    <a href="index.html#features" class="btn">
                        <i class="fas fa-arrow-left"></i> Вернуться к возможностям
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Подвал -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-section">
                    <h3>История моей семьи</h3>
                    <p>Сохраняйте ваше семейное наследие для будущих поколений. Создавайте цифровое генеалогическое древо и делитесь воспоминаниями.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Навигация</h3>
                    <ul class="footer-links">
                        <li><a href="index.html#features">Возможности</a></li>
                        <li><a href="index.html#about">О проекте</a></li>
                        <li><a href="auth.html">Вход / Регистрация</a></li>
                        <li><a href="#" onclick="showContactModal()">Контакты</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Правовая информация</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showTermsModal()">Пользовательское соглашение</a></li>
                        <li><a href="#" onclick="showPrivacyModal()">Политика конфиденциальности</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:support@family-history.ru">support@family-history.ru</a></li>
                        <li><a href="tel:+79999999999">+7 (999) 999-99-99</a></li>
                        <li><a href="#" onclick="showContactModal()">Техническая поддержка</a></li>
                    </ul>
                    <div class="social-links" style="margin-top: 15px;">
                        <a href="#" style="color: white; margin-right: 15px; font-size: 1.2rem;"><i class="fab fa-vk"></i></a>
                        <a href="#" style="color: white; margin-right: 15px; font-size: 1.2rem;"><i class="fab fa-telegram"></i></a>
                        <a href="#" style="color: white; font-size: 1.2rem;"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2024 История моей семьи. Все права защищены.</p>
                <p>Разработано с ❤️ для сохранения семейных ценностей</p>
            </div>
        </div>
    </footer>

    <!-- Модальное окно для построения дерева -->
    <div class="modal-overlay hidden" id="modal-overlay"></div>
    
    <!-- Уведомления -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <span id="notification-text"></span>
            <button class="notification-close">&times;</button>
        </div>
    </div>

    <!-- Загрузчик -->
    <div id="loader" class="loader-overlay hidden">
        <div class="loader"></div>
        <div class="loader-text" id="loader-text">Загрузка...</div>
    </div>

    <!-- Подключаем библиотеки -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Подключаем наши файлы -->
    <script src="supabase.js"></script>
    <script src="app.js"></script>
    
    <script>
        // Простые функции для навигации лендинга
        function showContactModal() {
            const modalHtml = `
                <div class="modal show">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Контакты</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p><strong>Email:</strong> support@family-history.ru</p>
                            <p><strong>Телефон:</strong> +7 (999) 999-99-99</p>
                            <p><strong>Техническая поддержка:</strong> круглосуточно</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary cancel-btn">
                                Закрыть
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            const overlay = document.getElementById('modal-overlay');
            if (overlay) {
                overlay.innerHTML = modalHtml;
                overlay.classList.remove('hidden');
                
                // Закрытие
                document.querySelector('.modal-close')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
                
                document.querySelector('.cancel-btn')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
            }
        }
        
        function showTermsModal() {
            const modalHtml = `
                <div class="modal show">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Пользовательское соглашение</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Здесь будет текст пользовательского соглашения...</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary cancel-btn">
                                Закрыть
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            const overlay = document.getElementById('modal-overlay');
            if (overlay) {
                overlay.innerHTML = modalHtml;
                overlay.classList.remove('hidden');
                
                // Закрытие
                document.querySelector('.modal-close')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
                
                document.querySelector('.cancel-btn')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
            }
        }
        
        function showPrivacyModal() {
            const modalHtml = `
                <div class="modal show">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Политика конфиденциальности</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Здесь будет текст политики конфиденциальности...</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary cancel-btn">
                                Закрыть
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            const overlay = document.getElementById('modal-overlay');
            if (overlay) {
                overlay.innerHTML = modalHtml;
                overlay.classList.remove('hidden');
                
                // Закрытие
                document.querySelector('.modal-close')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
                
                document.querySelector('.cancel-btn')?.addEventListener('click', () => {
                    overlay.classList.add('hidden');
                });
            }
        }
        
        // Мобильное меню для лендинга
        document.getElementById('landing-mobile-btn')?.addEventListener('click', function() {
            const navLinks = document.querySelector('#landing-header .nav-links');
            if (navLinks) {
                navLinks.classList.toggle('active');
            }
        });
        
        // Кнопка "Попробовать построить дерево"
        document.getElementById('try-tree-btn')?.addEventListener('click', () => {
            // Создаем демо-дерево
            createDemoTree();
        });
        
        function createDemoTree() {
            // Показываем загрузчик
            if (window.showLoader) {
                window.showLoader('Создание демо-дерева...');
            } else {
                showLoader('Создание демо-дерева...');
            }
            
            try {
                // Создаем демо-пользователя в localStorage
                const demoUser = {
                    id: 'demo_user_' + Date.now(),
                    email: 'demo@family-history.ru',
                    user_metadata: {
                        name: 'Демо Пользователь',
                        full_name: 'Демо Пользователь'
                    },
                    created_at: new Date().toISOString()
                };
                
                localStorage.setItem('family_tree_user', JSON.stringify(demoUser));
                localStorage.setItem('family_tree_email', 'demo@family-history.ru');
                localStorage.setItem('family_tree_password', 'demopassword123');
                
                // Создаем демо-данные
                const demoData = {
                    people: [
                        {
                            id: 'demo_1',
                            first_name: 'Иван',
                            last_name: 'Иванов',
                            birth_date: '1990-01-15',
                            gender: 'male',
                            relation: 'self',
                            photo_url: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80',
                            biography: 'Основатель семейного древа',
                            created_at: new Date().toISOString()
                        },
                        {
                            id: 'demo_2',
                            first_name: 'Мария',
                            last_name: 'Иванова',
                            birth_date: '1992-03-22',
                            gender: 'female',
                            relation: 'spouse',
                            photo_url: 'https://images.unsplash.com/photo-1494790108755-2616b786d4d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80',
                            created_at: new Date().toISOString()
                        },
                        {
                            id: 'demo_3',
                            first_name: 'Алексей',
                            last_name: 'Иванов',
                            birth_date: '2015-07-10',
                            gender: 'male',
                            relation: 'child',
                            photo_url: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80',
                            created_at: new Date().toISOString()
                        }
                    ]
                };
                
                // Сохраняем демо-данные
                const allData = JSON.parse(localStorage.getItem('family_tree_data') || '{}');
                if (!allData.people) allData.people = [];
                allData.people.push(...demoData.people);
                localStorage.setItem('family_tree_data', JSON.stringify(allData));
                
                // Устанавливаем глобальные переменные
                if (!window.supabaseClient) {
                    window.supabaseClient = {
                        auth: {
                            getUser: async () => {
                                return { data: { user: demoUser }, error: null };
                            }
                        }
                    };
                }
                
                window.currentUser = demoUser;
                window.people = demoData.people;
                window.events = [];
                window.media = [];
                
                if (window.showNotification) {
                    window.showNotification('✅ Демо-дерево создано! Переходим в приложение...', 'success');
                } else {
                    showNotification('✅ Демо-дерево создано! Переходим в приложение...', 'success');
                }
                
                // Перенаправляем в приложение
                setTimeout(() => {
                    window.location.href = 'app.html';
                }, 1500);
                
            } catch (error) {
                console.error('Ошибка создания демо-дерева:', error);
                if (window.showNotification) {
                    window.showNotification('Ошибка создания демо-дерева: ' + error.message, 'error');
                } else {
                    showNotification('Ошибка создания демо-дерева: ' + error.message, 'error');
                }
            } finally {
                if (window.hideLoader) {
                    window.hideLoader();
                } else {
                    hideLoader();
                }
            }
        }
        
        // Вспомогательные функции для уведомлений и загрузчика
        function showNotification(message, type = 'info') {
            let notification = document.getElementById('notification');
            if (!notification) {
                notification = document.createElement('div');
                notification.id = 'notification';
                notification.className = 'notification';
                notification.innerHTML = `
                    <div class="notification-content">
                        <span id="notification-text">${message}</span>
                        <button class="notification-close">&times;</button>
                    </div>
                `;
                document.body.appendChild(notification);
                
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.classList.remove('show');
                });
            }
            
            const text = document.getElementById('notification-text');
            if (text) {
                text.textContent = message;
            }
            
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        function showLoader(text = 'Загрузка...') {
            let loader = document.getElementById('loader');
            if (!loader) {
                loader = document.createElement('div');
                loader.id = 'loader';
                loader.className = 'loader-overlay hidden';
                loader.innerHTML = `
                    <div class="loader"></div>
                    <div class="loader-text" id="loader-text">${text}</div>
                `;
                document.body.appendChild(loader);
            }
            
            const loaderText = document.getElementById('loader-text');
            if (loaderText) {
                loaderText.textContent = text;
            }
            
            loader.classList.remove('hidden');
        }
        
        function hideLoader() {
            const loader = document.getElementById('loader');
            if (loader) {
                loader.classList.add('hidden');
            }
        }
        
        // Закрытие модальных окон по клику на оверлей
        document.getElementById('modal-overlay')?.addEventListener('click', (e) => {
            if (e.target.id === 'modal-overlay') {
                e.target.classList.add('hidden');
            }
        });
        
        // Закрытие по ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('modal-overlay')?.classList.add('hidden');
            }
        });
    </script>
</body>
</html>